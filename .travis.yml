branches:
  only:
  - master
language: node_js
node_js:
- '10'
cache:
  directories:
  - node_modules
jobs:
  include:
  - stage: test
    install:
    - npm install
    script:
    - npm run lint
    - npm run build
  - stage: deploy
    if: type = push
    install:
    - npm install
    script:
    - echo -e "machine github.com\n  login $GH_TOKEN" > ~/.netrc
    - npm run deploy
notifications:
  slack:
    secure: VpVv0/HiWi90qkAa0Q3yMoJ62pw6BaFW53+g9jExLA4aDjovh/+H+xNBiHOBrZi08WSjVNgjUCZDLipmP2dDGwIltnRfMp2qvPsO7dNMUb8RORQJRULCJz0r2Begh8apC5p7jSSFOVyb14IDrXje2+J/rnpiH56ocxnle0Hvhsm7Ak6NWKBATAd8PGrnLedqJbD87sfPRCxcuQbwL1TIujZRpfFUHT8QuOW7YszPNn9zWG7BYwnxctkyKd4E9wrxVfnqPqfReJu6Xet8L/e2cJg0QMyIzRwNtaw1Q4Po7tyiUo3WYulpUh51NbOyMn4MM/qx6x+UBY/naHYUlPc0m0JwtUeJMZjGBgALJOu1PgGD7bPb7BNIL2zZ9awcUL2POwYi6uJ2eeAahuiywfI7zuEcdWFOwSoqOjtWEwsebNoRdTJOwdKY7EYYOa0wpdve273VdANLvFtIWbcBUYRuKEYUUyM6t1JKWweMav1qIL1f1Zaigc/KEEjfR28AqpensJ+/MmMgEEuYCQ5VvKAjBeNs0xnyaeUjVaYNPCT/8j28tI2f/1P0a5EojVQ9uroJtGfy1C8lrMApAm6ULEzgFosGeidSXDhHs4LUXVOeNY6X54pvophpV62gn8/H5oeHsvnx7I42WfVyWV+mqZlTMmNer2idXWQiBQirOhqWwQ4=
